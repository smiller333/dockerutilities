# Package Documentation

## Metadata

**Source:** https://pkg.go.dev/github.com/docker/docker@v28.3.0+incompatible/builder

**Version:** v28.3.0+incompatible

**Generated:** 2025-06-28 21:26:34 UTC

## Overview

Package builder defines interfaces for any Docker builder to implement.

Historically, only server-side Dockerfile interpreters existed.
This package allows for other implementations of Docker builders.


## Constants

**Source:** [View Source](https://github.com/docker/docker/blob/v28.3.0/builder/builder.go#L19)

```go
const (
	// DefaultDockerfileName is the Default filename with Docker commands, read by docker build
	DefaultDockerfileName = "Dockerfile"
)
```

## Variables

This section is empty.

## Functions

This section is empty.

## Types

### Backend

Backend abstracts calls to a Docker Daemon.

**Source:** [View Source](https://github.com/docker/docker/blob/v28.3.0/builder/builder.go#L38)  
**Added in:** v1.10.0

```go
type Backend interface {
	ImageBackend
	ExecBackend

	// CommitBuildStep creates a new Docker image from the config generated by
	// a build step.
	CommitBuildStep(context.Context, backend.CommitConfig) (image.ID, error)
	// ContainerCreateWorkdir creates the workdir
	ContainerCreateWorkdir(containerID string) error
	CreateImage(ctx context.Context, config []byte, parent string, contentStoreDigest digest.Digest) (Image, error)

	ImageCacheBuilder
}
```

---

### ExecBackend

ExecBackend contains the interface methods required for executing containers

**Source:** [View Source](https://github.com/docker/docker/blob/v28.3.0/builder/builder.go#L58)  

```go
type ExecBackend interface {
	// ContainerAttachRaw attaches to container.
	ContainerAttachRaw(cID string, stdin io.ReadCloser, stdout, stderr io.Writer, stream bool, attached chan struct{}) error
	// ContainerCreateIgnoreImagesArgsEscaped creates a new Docker container and returns potential warnings
	ContainerCreateIgnoreImagesArgsEscaped(ctx context.Context, config backend.ContainerCreateConfig) (container.CreateResponse, error)
	// ContainerRm removes a container specified by `id`.
	ContainerRm(name string, config *backend.ContainerRmConfig) error
	// ContainerStart starts a new container
	ContainerStart(ctx context.Context, containerID string, checkpoint string, checkpointDir string) error
	// ContainerWait stops processing until the given container is stopped.
	ContainerWait(ctx context.Context, name string, condition container.WaitCondition) (<-chan container.StateStatus, error)
}
```

---

### Image

Image represents a Docker image used by the builder.

**Source:** [View Source](https://github.com/docker/docker/blob/v28.3.0/builder/builder.go#L92)  
**Added in:** v1.10.0

```go
type Image interface {
	ImageID() string
	RunConfig() *container.Config
	MarshalJSON() ([]byte, error)
	OperatingSystem() string
}
```

---

### ImageBackend

ImageBackend are the interface methods required from an image component

**Source:** [View Source](https://github.com/docker/docker/blob/v28.3.0/builder/builder.go#L53)  

```go
type ImageBackend interface {
	GetImageAndReleasableLayer(ctx context.Context, refOrID string, opts backend.GetImageAndLayerOptions) (Image, ROLayer, error)
}
```

---

### ImageCache

ImageCache abstracts an image cache.
(parent image, child runconfig) -> child image

**Source:** [View Source](https://github.com/docker/docker/blob/v28.3.0/builder/builder.go#L85)  
**Added in:** v1.9.0

```go
type ImageCache interface {
	// GetCache returns a reference to a cached image whose parent equals `parent`
	// and runconfig equals `cfg`. A cache miss is expected to return an empty ID and a nil error.
	GetCache(parentID string, cfg *container.Config, platform ocispec.Platform) (imageID string, err error)
}
```

---

### ImageCacheBuilder

ImageCacheBuilder represents a generator for stateful image cache.

**Source:** [View Source](https://github.com/docker/docker/blob/v28.3.0/builder/builder.go#L78)  
**Added in:** v1.13.0

```go
type ImageCacheBuilder interface {
	// MakeImageCache creates a stateful image cache.
	MakeImageCache(ctx context.Context, cacheFrom []string) (ImageCache, error)
}
```

---

### ROLayer

ROLayer is a reference to image rootfs layer

**Source:** [View Source](https://github.com/docker/docker/blob/v28.3.0/builder/builder.go#L100)  

```go
type ROLayer interface {
	Release() error
	NewRWLayer() (RWLayer, error)
	DiffID() layer.DiffID
	ContentStoreDigest() digest.Digest
}
```

---

### RWLayer

RWLayer is active layer that can be read/modified

**Source:** [View Source](https://github.com/docker/docker/blob/v28.3.0/builder/builder.go#L108)  

```go
type RWLayer interface {
	Release() error
	Root() string
	Commit() (ROLayer, error)
}
```

---

### Result

Result is the output produced by a Builder

**Source:** [View Source](https://github.com/docker/docker/blob/v28.3.0/builder/builder.go#L72)  

```go
type Result struct {
	ImageID   string
	FromImage Image
}
```

---

### Source

Source defines a location that can be used as a source for the ADD/COPY
instructions in the builder.

**Source:** [View Source](https://github.com/docker/docker/blob/v28.3.0/builder/builder.go#L26)  

```go
type Source interface {
	// Root returns root path for accessing source
	Root() string
	// Close allows to signal that the filesystem tree won't be used anymore.
	// For Context implementations using a temporary directory, it is recommended to
	// delete the temporary directory in Close().
	Close() error
	// Hash returns a checksum for a file
	Hash(path string) (string, error)
}
```

---

